function generateFiles(){const shortname=document.getElementById("shortname").value,name=document.getElementById("name").value;let selectedCompanies=[];selectedCompanies=Array.from(document.getElementById("companies_type").selectedOptions).map((option=>option.getAttribute("value")));var c1=isColorEmpty(document.getElementById("hexInput1").value),c2=isColorEmpty(document.getElementById("hexInput2").value),c3=isColorEmpty(document.getElementById("hexInput3").value);dlc=getDLC();const output=create_prefab_file(shortname,[shortname,name,JSON.stringify(selectedCompanies),c1,c2,c3,dlc]);document.getElementById("output").textContent=output,document.getElementById("download-button").disabled=!1}function create_prefab_file(filename,line_values){const template='{\n    "$id": 0,\n    "$type": "0|Game.Prefabs.BrandPrefab, Game",\n    "name": "{shortname}",\n    "active": true,\n    "components": {\n        "$id": 1,\n        "$type": "1|System.Collections.Generic.List`1[[Game.Prefabs.ComponentBase, Game]], mscorlib",\n        "$rlength": {component_count},\n        "$rcontent": [{components}\n        ]\n    },\n    "m_Companies": {\n        "$id": {m_company_id},\n        "$type": "{m_company_type_id}|Game.Prefabs.CompanyPrefab[], Game",\n        "$rlength": {companies_count},\n        "$rcontent": [\n            {companies_text}\n        ]\n    },\n    "m_BrandColors": {\n        "$id": 6,\n        "$type": "6|UnityEngine.Color[], UnityEngine.CoreModule",\n        "$rlength": 3,\n        "$rcontent": [\n            {\n                "$type": "7|UnityEngine.Color, UnityEngine.CoreModule",\n                {color_1}\n            },\n            {\n                "$type": 7,\n                {color_2}\n            },\n            {\n                "$type": 7,\n                {color_3}\n            }\n        ]\n    }\n}',[shortname,name,companies_type,c1,c2,c3,dlc]=line_values;var component_count=0;const companies=JSON.parse(companies_type),companies_count=companies.length,companies_text=addGUID(companies);var next_id=2,next_type_id=2,obsoleteText="";name.split(" ").length>1&&(obsoleteReturn=obsoleteComponent(name,next_id,next_type_id),obsoleteText=obsoleteReturn[0],used_id=obsoleteReturn[1],used_type_id=obsoleteReturn[2],next_id+=used_id,next_type_id+=used_type_id,component_count++);var dlcText="";""!=dlc&&(dlcReturn=dlcComponent(dlc,next_id,next_type_id),dlcText=dlcReturn[0],used_id=dlcReturn[1],used_type_id=dlcReturn[2],next_id+=used_id,next_type_id+=used_type_id,component_count++);const components=joinWithComma(obsoleteText,dlcText);return template.replace("{shortname}",shortname).replace("{component_count}",component_count).replace("{components}",components).replace("{m_company_id}",next_id).replace("{m_company_type_id}",next_type_id).replace("{companies_text}",companies_text).replace("{companies_count}",companies_count).replace("{color_1}",hexToRgb01(c1)).replace("{color_2}",hexToRgb01(c2)).replace("{color_3}",hexToRgb01(c3))}function downloadFile(){const shortname=document.getElementById("shortname").value,content=document.getElementById("output").textContent,filename=`${shortname}.Prefab`,blob=new Blob([content],{type:"text/plain"}),link=document.createElement("a");link.href=URL.createObjectURL(blob),link.download=filename,document.body.appendChild(link),link.click(),document.body.removeChild(link)}document.addEventListener("DOMContentLoaded",(function(){const shortNameInput=document.getElementById("shortname"),shortnameWarning=document.getElementById("shortnameWarning"),generateButton=document.getElementById("generate-button"),selectedOptions=$("#companies_type");var shortNameValid=!shortNameInput.value.includes(" "),companyValid=selectedOptions.val().length>0;function updateButtonState(){shortNameValid&&companyValid?(generateButton.disabled=!1,generateButton.classList.remove("btn-danger"),generateButton.classList.add("btn-primary")):(generateButton.disabled=!0,generateButton.classList.remove("btn-primary"),generateButton.classList.add("btn-danger"))}shortNameInput.addEventListener("input",(function(){this.value.includes(" ")?(shortnameWarning.style.display="block",shortNameValid=!1):(shortnameWarning.style.display="none",shortNameValid=!0),updateButtonState()})),selectedOptions.on("change",(function(){companyValid=selectedOptions.val().length>0,updateButtonState()})),updateButtonState()}));