function loadCompanies(selector,url){$.ajax({url:url,dataType:"json",success:function(data){let companies=[];data.companies.forEach((function(company){let groupName=company.name.split(":")[0].trim(),companyId=company.id,companyName=company.name.split(":")[1].trim(),groupIndex=companies.findIndex((group=>group.text===groupName));-1===groupIndex?companies.push({text:groupName,children:[{id:companyId,text:companyName}]}):companies[groupIndex].children.push({id:companyId,text:companyName})})),$(selector).select2({data:companies,dropdownAutoWidth:!0,closeOnSelect:!1,placeholder:"Select companies",theme:"bootstrap-5",selectionCssClass:"select2--small"})},error:function(jqXHR,textStatus,errorThrown){console.error("Error loading data: ",textStatus,errorThrown)}})}$(document).ready((function(){loadCompanies("#companies_type","companyGUID.json")}));