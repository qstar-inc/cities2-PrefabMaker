(()=>{var e={458:()=>{document.addEventListener("DOMContentLoaded",(function(){var e=document.getElementById("shortname"),t=document.getElementById("name"),n=document.getElementById("sameAsShortName");t.value=e.value,n.addEventListener("change",(function(){this.checked?(t.value=e.value,t.disabled=!0):t.disabled=!1})),e.addEventListener("input",(function(){n.checked&&(t.value=this.value)}))}))}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}(()=>{"use strict";function e(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n="string"==typeof e?e:e.toString(),r="",a=0,o=-1/0;a<n.length&&("."!=n[a]?r+=n[a]:(r+=0==t?"":n[a],o=a),a!=o+t);a++);if(a==n.length)if(o==-1/0){if(0!=t){r+=".";for(var l=0;l<t;l++)r+="0"}}else for(;a<=o+t;)r+="0",a++;return t>0&&r.includes(".")&&(r=r.replace(/\.?0+$/,"")),r}function t(e,t){var n=document.getElementById(e),r=document.getElementById(t);n.addEventListener("input",(function(e){var t=e.target.value;o(t)&&(r.value=t,r.style.backgroundColor=l(t))})),r.addEventListener("input",(function(e){var t=e.target.value;n.value=t,r.style.backgroundColor=l(t)}));var a=n.value||"#000000";function o(e){return/^#([0-9A-F]{6})$/i.test(e)}function l(e){var t=parseInt(e.slice(1,3),16),n=parseInt(e.slice(3,5),16),r=parseInt(e.slice(5,7),16);return.299*(t=255-t)+.587*(n=255-n)+.114*(r=255-r)>186?"#FFFFFF":"#000000"}o(a)&&(r.style.backgroundColor=l(a))}function r(e){return e=e==[]?"#000000":e}function a(t){t=t.replace("#","");var n=e(parseInt(t.substring(0,2),16)/255,10),r=e(parseInt(t.substring(2,4),16)/255,10),a=e(parseInt(t.substring(4,6),16)/255,10);return"".concat(n,",").concat(r,",").concat(a,",1").split(",").join(",\n                ")}function o(e){var t="";switch(e=e.replace("dlc-","")){case"cs1th":t="39980c750d4c50b4ea7a7477b0411513";break;case"paradox":t="8e8e5bce147330542a1b89e4e96c2322";break;case"landmark":t="c3724de73723f5b4ab589dd1fa756861";break;case"sanfrancisco":t="6a2dbb5b0d5ed814d975ec201667b644";break;default:t=""}return t}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,l,c=[],i=!0,d=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;i=!1}else for(;!(i=(r=o.call(n)).done)&&(c.push(r.value),c.length!==t);i=!0);}catch(e){d=!0,a=e}finally{try{if(!i&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(d)throw a}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return c(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}t("hexInput1","colorPicker1"),t("hexInput2","colorPicker2"),t("hexInput3","colorPicker3"),document.addEventListener("DOMContentLoaded",(function(){var e=document.querySelectorAll(".dlc-button"),t=document.getElementById("requiresDLC"),n=document.querySelector(".dlc-container");t.addEventListener("change",(function(){this.checked?n.style.display="flex":n.style.display="none"})),e.forEach((function(t){t.addEventListener("click",(function(){e.forEach((function(e){e.classList.remove("selected")})),this.classList.add("selected")}))}))})),document.addEventListener("DOMContentLoaded",(function(){var e=document.getElementById("shortname"),t=document.getElementById("shortnameWarning"),n=document.getElementById("generate-button"),r=$("#companies_type"),a=!e.value.includes(" "),o=r.val().length>0;function l(){a&&o?(n.disabled=!1,n.classList.remove("btn-danger"),n.classList.add("btn-primary")):(n.disabled=!0,n.classList.remove("btn-primary"),n.classList.add("btn-danger"))}e.addEventListener("input",(function(){this.value.includes(" ")?(t.style.display="block",a=!1):(t.style.display="none",a=!0),l()})),r.on("change",(function(){o=r.val().length>0,l()})),l()})),window.generateFiles=function(){var e,t=document.getElementById("shortname").value,n=document.getElementById("name").value;e=Array.from(document.getElementById("companies_type").selectedOptions).map((function(e){return e.getAttribute("value")}));var c=r(document.getElementById("hexInput1").value),i=r(document.getElementById("hexInput2").value),d=r(document.getElementById("hexInput3").value),s=function(){var e="",t=document.querySelector(".dlc-button.selected");return t&&(e=t.id),e}(),u=function(e){var t='{\n    "$id": 0,\n    "$type": "0|Game.Prefabs.BrandPrefab, Game",\n    "name": "{shortname}",\n    "active": true,\n    "components": {\n        "$id": 1,\n        "$type": "1|System.Collections.Generic.List`1[[Game.Prefabs.ComponentBase, Game]], mscorlib",\n        "$rlength": {component_count},\n        "$rcontent": [{components}\n        ]\n    },\n    "m_Companies": {\n        "$id": {m_company_id},\n        "$type": "{m_company_type_id}|Game.Prefabs.CompanyPrefab[], Game",\n        "$rlength": {companies_count},\n        "$rcontent": [\n            {companies_text}\n        ]\n    },\n    "m_BrandColors": {\n        "$id": {m_brandcolor_id},\n        "$type": "{m_brandcolor_type_id}|UnityEngine.Color[], UnityEngine.CoreModule",\n        "$rlength": 3,\n        "$rcontent": [\n            {\n                "$type": "{m_unitycolor_type_id}|UnityEngine.Color, UnityEngine.CoreModule",\n                {color_1}\n            },\n            {\n                "$type": {m_unitycolor_type_id},\n                {color_2}\n            },\n            {\n                "$type": {m_unitycolor_type_id},\n                {color_3}\n            }\n        ]\n    }\n}',n=l(e,7),r=n[0],c=n[1],i=n[2],d=n[3],s=n[4],u=n[5],m=n[6],p=0,f=JSON.parse(i),y=f.length,v=(_=f,_.map((function(e){return'$fstrref:"UnityGUID:{guid}"'.replaceAll("{guid}",e)})).join(",\n            ")),b=2,h=2,g="";var _;if(c.split(" ").length>1){var I=function(e,t,n){return['\n            {\n                "$id": {next_id},\n                "$type": "{next_type_id}|Game.Prefabs.ObsoleteIdentifiers, Game",\n                "name": "ObsoleteIdentifiers",\n                "active": true,\n                "m_PrefabIdentifiers": {\n                    "$id": {next_id2},\n                    "$type": "{next_type_id2}|Game.Prefabs.PrefabIdentifierInfo[], Game",\n                    "$rlength": 1,\n                    "$rcontent": [\n                        {\n                            "$id": {next_id3},\n                            "$type": "{next_type_id3}|Game.Prefabs.PrefabIdentifierInfo, Game",\n                            "m_Name": "{name}",\n                            "m_Type": "BrandPrefab"\n                        }\n                    ]\n                }\n            }'.replaceAll("{name}",e).replaceAll("{next_id}",t).replaceAll("{next_type_id}",n).replaceAll("{next_id2}",t+1).replaceAll("{next_type_id2}",n+1).replaceAll("{next_id3}",t+2).replaceAll("{next_type_id3}",n+2),3,3]}(c,b,h);g=I[0],b+=I[1],h+=I[2],p++}var E="";if(""!=m){var $=function(e,t,n){return['\n            {\n                "$id": {next_id},\n                "$type": "{next_type_id}|Game.Prefabs.ContentPrerequisite, Game",\n                "name": "ContentPrerequisite",\n                "active": true,\n                "m_ContentPrerequisite": $fstrref:"UnityGUID:{dlc}"\n            }'.replaceAll("{dlc}",o(e)).replaceAll("{next_id}",t).replaceAll("{next_type_id}",n),1,1]}(m,b,h);E=$[0],b+=$[1],h+=$[2],p++}var x=(A=g,B=E,A&&B?A+","+B:A||B||"");var A,B;return t.replaceAll("{shortname}",r).replaceAll("{component_count}",p).replaceAll("{components}",x).replaceAll("{m_company_id}",b).replaceAll("{m_company_type_id}",h).replaceAll("{companies_text}",v).replaceAll("{companies_count}",y).replaceAll("{m_brandcolor_id}",b+1).replaceAll("{m_brandcolor_type_id}",h+1).replaceAll("{m_unitycolor_type_id}",h+2).replaceAll("{color_1}",a(d)).replaceAll("{color_2}",a(s)).replaceAll("{color_3}",a(u))}([t,n,JSON.stringify(e),c,i,d,s]),m=document.getElementById("output");m.textContent=u,m.classList.remove("d-none"),document.getElementById("pre-copy"),document.getElementById("generate-button").scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"});var p=document.createElement("button");p.id="copy-output",p.classList.add("btn","btn-outline-warning","pre-copy"),p.innerHTML='<i class="bi bi-copy"></i> Copy',p.onclick=function(){var e;e=m.textContent,navigator.clipboard.writeText(e).then((function(){var e=document.getElementById("text-copied-toast");new bootstrap.Toast(e).show()}),(function(e){console.error("There was an error copying the text: ",e)}))},m.parentNode.style.position="relative",m.parentNode.appendChild(p),document.getElementById("download-button").disabled=!1},window.downloadFile=function(){var e=document.getElementById("shortname").value,t=document.getElementById("output").textContent,n="".concat(e,".Prefab"),r=new Blob([t],{type:"text/plain"}),a=document.createElement("a");a.href=URL.createObjectURL(r),a.download=n,document.body.appendChild(a),a.click(),document.body.removeChild(a)};function i(e){return function(e){if(Array.isArray(e))return d(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return d(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}$(document).ready((function(){var e,t,n;e="#companies_type",t="/cities2-PrefabMaker/assets/data/companyGUID.json",n="company",$.ajax({url:t,dataType:"json",success:function(t){if("company"==n)var r=function(e){var t=[];return e.companies.forEach((function(e){var n=e.name.split(":")[0].trim(),r=e.id,a=e.name.split(":")[1].trim(),o=t.findIndex((function(e){return e.text===n}));-1===o?t.push({text:n,children:[{id:r,text:a}]}):t[o].children.push({id:r,text:a})})),t}(t);$(e).select2({data:r,dropdownAutoWidth:!0,closeOnSelect:!1,placeholder:"Select companies",theme:"bootstrap-5",dropdownCssClass:"select2--small",matcher:function(e,t){var n=(0,$.fn.select2.defaults.defaults.matcher)(e,t);return n&&t.children&&n.children&&t.children.length?(t.children.length!==n.children.length&&t.text.toLowerCase().includes(e.term.toLowerCase())&&(n.children=t.children),n):null}}),$(e).prop("disabled",!1)},error:function(t,n,r){console.error("Error loading data: ",n,r),$(e).prop("disabled",!0),$("generate-button").prop("disabled",!0)}})})),document.addEventListener("DOMContentLoaded",(function(){var e=document.getElementById("fileUpload"),t=document.getElementById("spinner-overlay"),n=document.getElementById("blur-overlay");e.addEventListener("change",(function(e){t.classList.remove("d-none"),n.classList.remove("d-none");var r=e.target.files[0];if(r){var a=new FileReader;a.onload=function(e){var t=e.target.result;try{!function(e){document.getElementById("shortname").value=e.shortname,document.getElementById("name").value=e.name,e.shortname==e.name?(document.getElementById("sameAsShortName").checked=!0,document.getElementById("name").disabled=!0):(document.getElementById("sameAsShortName").checked=!1,document.getElementById("name").disabled=!1);if($("#companies_type").val(e.companies_type).trigger("change"),document.getElementById("hexInput1").value=e.colors[0],document.getElementById("colorPicker1").value=e.colors[0],document.getElementById("hexInput2").value=e.colors[1],document.getElementById("colorPicker2").value=e.colors[1],document.getElementById("hexInput3").value=e.colors[2],document.getElementById("colorPicker3").value=e.colors[2],document.getElementById("requiresDLC").checked=e.requiresDLC,document.querySelectorAll(".dlc-button").forEach((function(e){return e.classList.remove("selected")})),e.requiresDLC){document.querySelector(".dlc-container").style.display="flex";var t="dlc-"+function(e){var t="";switch(e){case"39980c750d4c50b4ea7a7477b0411513":t="cs1th";break;case"8e8e5bce147330542a1b89e4e96c2322":t="paradox";break;case"c3724de73723f5b4ab589dd1fa756861":t="landmark";break;case"6a2dbb5b0d5ed814d975ec201667b644":t="sanfrancisco";break;default:t=""}return t}(e.requiredDLC);document.getElementById(t).classList.add("selected")}}(function(e){var t={shortname:"",name:"",companies_type:[],colors:["#000000","#000000","#000000"],requiresDLC:!1,requiredDLC:""},n=/"\$type": "0\|Game.Prefabs.BrandPrefab, Game",\s*"name"\s*:\s*"([^"]*)"/,r=/"\$type": "[\d]+\|Game.Prefabs.CompanyPrefab\[\], Game",\s*"\$rlength": [\d]+,\s*"\$rcontent": \[([\w\s,":$]+)\s*\]/m,a=/\$fstrref:"UnityGUID:([^"]*)"/g,o=/"\$type": "[\d]+\|Game.Prefabs.PrefabIdentifierInfo\[\], Game",\s*"\$rlength": [\d]+,\s*"\$rcontent": \[([\w"$:,.\|\s_{}]+)\s*\]/m,l=/"m_Name": "([\w ]+)",/,c=/"m_BrandColors": [{\w\s"$:,.\[\]\|]*rcontent": \[\s*{\s*"\$[\w": \|.,]*([\w\s".,:\|$]+)},\s*{\s*"\$[\w": \|.,]*([\w\s".,:\|$]+)},\s*{\s*"\$[\w": \|.,]*([\w\s".,:\|$]+)}/g,d=/Game.Prefabs.ContentPrerequisite,[ \w",\s:]+m_ContentPrerequisite": \$[\w:"]+([\w]{32})"/;if(e.match(n)){var s=e.match(n)[1];t.shortname=s;var u=e.match(o);t.name=null==u?s:u[1].match(l)[1];var m=i(e.match(r)[1].matchAll(a));t.companies_type=m.map((function(e){return e[1]}));var p=i(e.matchAll(c))[0];p.shift(),p=p.map((function(e){var t,n=e.trim().split(",").map((function(e){return parseFloat(e.trim())}));return t=n,"#"+Math.round(255*t[0]).toString(16).padStart(2,"0")+Math.round(255*t[1]).toString(16).padStart(2,"0")+Math.round(255*t[2]).toString(16).padStart(2,"0")})),t.colors=[p[0],p[1],p[2]];var f=e.match(d);return null!=f&&(t.requiresDLC=!0,t.requiredDLC=f[1]),t}throw new Error("Invalid prefab file format.")}(t))}catch(e){console.error("Error parsing Prefab:",e),alert("Invalid Prefab file. Please select a valid Brand Prefab file.")}},a.readAsText(r)}else alert("Please upload a valid Brand Prefab file.");t.classList.add("d-none"),n.classList.add("d-none")}))}));n(458)})()})();